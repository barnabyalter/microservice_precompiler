<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Microservice precompiler by barnabyalter</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Microservice precompiler</h1>
        <p>Compiles Javascripts and Stylesheets and creates HTML pages from templates into a distribution folder ready for deployment.</p>

        <p class="view"><a href="https://github.com/barnabyalter/microservice_precompiler">View the Project on GitHub <small>barnabyalter/microservice_precompiler</small></a></p>


        <ul>
          <li><a href="https://github.com/barnabyalter/microservice_precompiler/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/barnabyalter/microservice_precompiler/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/barnabyalter/microservice_precompiler">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="microserviceprecompiler" class="anchor" href="#microserviceprecompiler" aria-hidden="true"><span class="octicon octicon-link"></span></a>MicroservicePrecompiler</h1>

<p><a href="https://travis-ci.org/barnabyalter/microservice_precompiler"><img src="https://api.travis-ci.org/barnabyalter/microservice_precompiler.png" alt="Build Status"></a>
<a href="https://gemnasium.com/barnabyalter/microservice_precompiler"><img src="https://gemnasium.com/barnabyalter/microservice_precompiler.png" alt="Dependency Status"></a>
<a href="https://codeclimate.com/github/barnabyalter/microservice_precompiler"><img src="https://codeclimate.com/github/barnabyalter/microservice_precompiler.png" alt="Code Climate"></a>
<a href="http://badge.fury.io/rb/microservice_precompiler"><img src="https://badge.fury.io/rb/microservice_precompiler.png" alt="Gem Version"></a>
<a href="https://coveralls.io/r/barnabyalter/microservice_precompiler"><img src="https://coveralls.io/repos/barnabyalter/microservice_precompiler/badge.png?branch=master" alt="Coverage Status"></a></p>

<p>The microservice precompiler uses a handful of technologies to compile Javascripts and Stylesheets and create HTML pages from templates into a distribution folder ready for deployment. The so-called "microservices" used are CoffeeScript, SASS and Mustache, compiling and minifying (where possible) into Javascript, CSS and HTML, respectively.</p>

<p>The SASS (or SCSS) is compiled into CSS via Compass; the CoffeeScript is translated to Javascript via Sprockets; both CSS and JS have their dependency trees included in-file by Sprockets; CSS and JS are then minified and compressed via YUICompressor and Uglifier, respectively.</p>

<p>The gem requires that your project root be a Compass project and expects that you have a folder structure matching the following in the root of your project:</p>

<pre><code>javascripts/
sass/
templates/
mustaches.yml
</code></pre>

<p>Where javascripts/ contains your Coffee, sass/ contains your SASS, and templates contains a folder structure matching your mustaches.yml file for building out pages from mustache templates (see below).</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>To use with bundler add this to your Gemfile:</p>

<pre><code>gem 'microservice_precompiler'
</code></pre>

<p>Or install it yourself:</p>

<pre><code>$ gem install microservice_precompiler
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To build all assets and templates into the distribution (./dist by default) folder:</p>

<div class="highlight highlight-ruby"><pre><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">'</span>microservice_precompiler<span class="pl-pds">'</span></span>
precompiler <span class="pl-k">=</span> <span class="pl-c1">MicroservicePrecompiler</span>::<span class="pl-c1">Builder</span>.<span class="pl-k">new</span>
precompiler.compile</pre></div>

<p>Or with initialize options:</p>

<pre><code>require 'microservice_precompiler'
precompiler = MicroservicePrecompiler::Builder.new
precompiler.project_root = "."
precompiler.build_path = "dist"
precompiler.mustaches_filename = "mustaches.yml"
precompiler.compile
</code></pre>

<p>This runs all the precompiling options. Each can also be invoked individually:</p>

<pre><code># Clears the dist folder and sass cache files
precompiler.cleanup
# Runs the Compass build, which sends SASS to cachs
precompiler.compass_build
# Runs the Sprockets build which compiles CoffeeScript, minifies assets and moves to dist folder
precompiler.sprockets_build
# Runs the Mustache template build, which creates output files with the same syntax from the mustaches config yaml
 precompiler.mustache_build
</code></pre>

<h3>
<a id="sass-and-coffeescript" class="anchor" href="#sass-and-coffeescript" aria-hidden="true"><span class="octicon octicon-link"></span></a>SASS and CoffeeScript</h3>

<p>These two parts are pretty simple. They are contained within their relevant directories and are written in their respective technologies. Because Sprockets is used to compile them the folders may contain subfolders which are automatically included in-line if the following line is present in a top-level file (where dependencies is the name of the subfolder you wish to include):</p>

<div class="highlight highlight-coffee"><pre><span class="pl-k">/*</span>
 <span class="pl-k">*=</span>require_tree .<span class="pl-k">/</span>dependencies
 <span class="pl-k">*/</span></pre></div>

<h3>
<a id="mustache-templating" class="anchor" href="#mustache-templating" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mustache templating</h3>

<p>The mustache builder requires you to provide a template file and a logic file from which to build the template. You can create a complex folder structure in the templates directory as long as it's logic is matched in the mustaches.yml config file. An example of the mustaches.yml follows:</p>

<pre><code>templates:
  - Sample:
    - Sample
    - Sample1
    - SampleFolder:
      - Sample2:
        - Sample2
    - SampleFolder:
      - Sample2
    - sample_with_underscore
</code></pre>

<ul>
<li>The case of the files is preserved from the mustaches config yaml. However, files like the above 'sample_with_underscore' are assumed to contain a class SampleWithUnderscore since this is the standard ruby practice.</li>
<li>The top level is the directory you are building from. Multiple directories will work as well.</li>
<li>The top level directory contains an array of template names, each of which is a hash of logic files to use the template.
** For example, Sample and Sample1 are two logic files which implement a mustache template called Sample.</li>
<li>If one of the logic files is itself a hash it is assumed to be a directory. The mustache builder will treat this the same as the top level directory, reading the array of template file hashes with their array of logic files.
** In the above example, SampleFolder is a folder which contains a mustache template called Sample2 and a logic file Sample2 which implements the template Sample2. The following SampleFolder with only Sample2 beneath is does the same thing.</li>
</ul>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Added some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://d2weczhvl823v0.cloudfront.net/barnabyalter/microservice_precompiler/trend.png" alt="Bitdeli Badge"></a></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/barnabyalter">barnabyalter</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>